

<!-- Request Calendar Modal -->
<!-- <div class="modal fade" id="exampleModal1" tabindex="-2" role="dialog" aria-labelledby="exampleModal1Label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModal1Label">Schedule Appointment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Calendar here...
        <div class='app'>

          <div class='app-top'>
            <button (click)='toggleVisible()'>toggle visible</button>
            <button (click)='gotoPast(goToDate)'>go to a date in the past</button>
            (also, click a date/time to add an event)
          </div>

          <div class='app-calendar' *ngIf="calendarVisible">
            <full-calendar
            #calendar
            defaultView="dayGridMonth"
            [header]="{
              left: 'prev,next today',
              center: 'title',
              right: 'dayGridMonth, timeGridWeek, timeGridDay, listWeek'
            }"
            [allDaySlot]="false"
            [businessHours]="calendarBusinessHours"
            [plugins]="calendarPlugins"
            [events]="calendarEvents"
            (dateClick)="handleDateClick($event, calEvent)"
            [selectConstraint]="businessHours"
            [selectable]="true"
            [minTime]="minimumTime"
            [maxTime]="maximumTime"
            hiddenDays="[0,5,6]"
            [validRange]="validRange"
            [height]="350"
            ></full-calendar>
          </div>

        </div>
      </div>
    </div>
  </div>
</div> -->

<!-- <div class="modal fade" id="exampleModal2" tabindex="-3" role="dialog" aria-labelledby="exampleModal2Label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModal2Label">Appointment Schedule Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Event form here...
      </div>
    </div>
  </div>
</div> -->

<!-- Request Calendar Event Modal -->
<ng-template #calEvent let-c="close" let-d="dismiss">

  <div class="modal-container">

    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"> <i class="fa fa-home"> </i> Venue1 : Adress / Location </h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body">
      <div class="submit-message alert alert-success" *ngIf="isSubmitSuccess" role="alert">
        Cool! Your schedule is updated on your calendar.
      </div>
      <form novalidate #f="ngForm" (ngSubmit)="addEvent(f.value)" class="">
        <div class="row">

          <div class="col-8">

            <div class="form-group">
              <div class="row">
                <label class="col-3"> Event Title  <span class="pull-right"> : </span> </label>
                <div class="col-9">
                  <input type="text" name="schedule_title" class="form-control" ngModel>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <label class="col-3"> Event Description  <span class="pull-right"> : </span> </label>
                <div class="col-9">
                  <textarea name="schedule_desc" class="form-control" ngModel rows="3" cols="80"></textarea>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <label class="col-3"> Event Start Time  <span class="pull-right"> : </span> </label>
                <div class="col-6">
                  <input type="datetime-local" name="schedule_start_time" class="form-control" [(ngModel)]="startTime">
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <label class="col-3"> Event End Time  <span class="pull-right"> : </span> </label>
                <div class="col-6">
                  <input type="datetime-local" name="schedule_end_time" class="form-control" [(ngModel)]="endTime">
                  <!-- <input type="datetime-local" name="schedule_end_time" class="form-control" [(ngModel)]="endTime" ngModel> -->
                  <!-- <input [owlDateTime]="dt" [owlDateTimeTrigger]="dt"><owl-date-time #dt></owl-date-time> -->
                </div>
              </div>
            </div>

          </div>

        </div>

        <div class="row">
          <div class="col-8 align-right">
            <hr />
            <button class="btn btn-default btn-primary save pull-right" type="submit" [disabled]="isSubmitSuccess ? true : null"> Submit </button>
            <button type="button" class="btn btn-secondary" (click)="d('Cross click')">Close</button>
          </div>
        </div>

      </form>
    </div>

  </div>

</ng-template>
<ng-template #goToDate let-c="close" let-d="dismiss">

  <div class="modal-container">

    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"> <i class="fa fa-home"> </i> Specify a date </h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body">
      <form novalidate #f1="ngForm" (ngSubmit)="goToDateEvent(f1.value)" class="tab-info tab-content">
        <div class="row">

          <div class="col-8">

            <div class="form-group">
              <div class="row">
                <label class="col-3"> Date  <span class="pull-right"> : </span> </label>
                <div class="col-6">
                  <input type="date" name="goToSpecificDate" class="form-control" [(ngModel)]="startTime">
                </div>
              </div>
            </div>

          </div>

        </div>

        <div class="row">
          <div class="col-8 align-right">
            <hr />
            <button class="btn btn-default btn-primary save pull-right" type="submit" [disabled]="isSubmitSuccess ? true : null"> Submit </button>
            <button type="button" class="btn btn-secondary" #closeGoToDate (click)="d('Cross click')">Close</button>
          </div>
        </div>

      </form>
    </div>

  </div>

</ng-template>

<!-- Requests tab -->
<div class="row">
  <div class="col col-xl-12 col-lg-12">
    <div class="card mb-12">


    <div class="card-body table-responsive">

      <!-- Requests list table -->
      <table class="table" [hidden]="!showReqListTable">
        <thead>
          <tr>
            <th>#</th>
            <th>PC Name</th>
            <th>Event Type</th>
            <th>Event Date</th>
            <th>Guests #</th>
            <th>Mobile Number</th>
            <th>Email Address</th>
            <th>Subject</th>
            <th> Request Status </th>
            <th>Comments</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let req of requestsList; let i = index;">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ req.pc_name }}</td>
            <td>{{ req.event_type }}</td>
            <td>{{ req.event_date }}</td>
            <td>{{ req.guests_count }}</td>
            <td>{{ req.mobile_number }}</td>
            <td>{{ req.email_address }}</td>
            <td>{{ req.subject }}</td>
            <td>{{ req.request_status }}</td>
            <td>{{ req.request_comments }}</td>
            <td>
              <i class="fa fa-fw fa-bars" (click)="showMoreDetails(i)" data-toggle="modal" data-target="#exampleModal"></i>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Calendar application -->
      <div class='app' [hidden]="!showCalendar">

        <div class='app-calendar' *ngIf="calendarVisible">
          <full-calendar
          #calendar
          defaultView="dayGridMonth"
          [header]="{
            left: 'prev,next',
            center: 'title',
            right: 'dayGridMonth, timeGridWeek, timeGridDay, listWeek'
          }"
          [allDaySlot]="false"
          [businessHours]="calendarBusinessHours"
          [plugins]="calendarPlugins"
          [events]="calendarEvents"
          (dateClick)="handleDateClick($event, calEvent)"
          [selectConstraint]="businessHours"
          [selectable]="true"
          [minTime]="minimumTime"
          [maxTime]="maximumTime"
          hiddenDays="[0,5,6]"
          [validRange]="validRange"
          [height]="400"
          ></full-calendar>
        </div>

      </div>

    </div>


  </div>
</div>
</div>

<!-- Request Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Request Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6">
            <div class="row">
              <div class="col-6">
                <label for="">PC Name</label>
                <span class="pull-right">:</span>
              </div>
              <div class="col-6">
                {{ selectedRequest.pc_name }}
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="row">
              <div class="col-6">
                <label for=""> Event Type </label>
                <span class="pull-right">:</span>
              </div>
              <div class="col-6">
                {{ selectedRequest.event_type }}
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="row">
              <div class="col-6">
                <label for="">Event Date</label>
                <span class="pull-right">:</span>
              </div>
              <div class="col-6">
                {{ selectedRequest.event_date }}
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="row">
              <div class="col-6">
                <label for="">No Of Guests </label>
                <span class="pull-right">:</span>
              </div>
              <div class="col-6">
                {{ selectedRequest.guests_count }}
              </div>
            </div>
          </div>
        </div>
        <div class="reply-text" *ngIf="!isSchedulable(selectedRequest)">
          <textarea name="replyText" value="" rows="4" cols="80" [(ngModel)]="replyText">
          </textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-warning" (click)="sendReply(selectedRequest, false)" *ngIf="isRejectable(selectedRequest)">Reject</button>
        <button type="button" class="btn btn-success" (click)="sendReply(selectedRequest, true)" *ngIf="isAcceptable(selectedRequest)">Accept</button>
        <button type="button" class="btn btn-primary" (click)="showAdminCalendar()" *ngIf="isSchedulable(selectedRequest)"
        data-toggle="modal" data-target="#exampleModal1" data-dismiss="modal">Schedule Appointment</button>
      </div>
    </div>
  </div>
</div>
